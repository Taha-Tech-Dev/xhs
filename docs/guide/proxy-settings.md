# 代理设置

本页面介绍如何在 XHS1 中配置和使用代理服务器。

## 为什么需要代理？

使用代理服务器可以：

- 避免 IP 被限制
- 提高访问稳定性
- 绕过地理限制
- 保护账号安全
- 提升下载速度

## 代理类型

XHS1 支持以下类型的代理：

- HTTP 代理
- HTTPS 代理
- SOCKS5 代理
- 隧道代理

## 配置方法

### 通过界面配置

1. 进入设置页面
   - 点击右上角设置图标
   - 选择"代理设置"选项

2. 添加代理服务器
   - 点击"添加代理"按钮
   - 填写代理信息：
     - 代理类型
     - 服务器地址
     - 端口号
     - 用户名（如需）
     - 密码（如需）

3. 代理测试
   - 点击"测试连接"
   - 查看测试结果
   - 确认代理可用

### 通过环境变量配置

在 `.env` 文件中配置：

```env
# 代理开关
PROXY_ENABLED=true

# HTTP/HTTPS 代理
HTTP_PROXY=http://username:password@proxy.example.com:8080
HTTPS_PROXY=http://username:password@proxy.example.com:8080

# SOCKS5 代理
SOCKS_PROXY=socks5://username:password@proxy.example.com:1080

# 不使用代理的地址
NO_PROXY=localhost,127.0.0.1
```

### 通过配置文件配置

在 `config/proxy.json` 中配置：

```json
{
  "enabled": true,
  "proxyList": [
    {
      "type": "http",
      "host": "proxy1.example.com",
      "port": 8080,
      "username": "user1",
      "password": "pass1"
    },
    {
      "type": "socks5",
      "host": "proxy2.example.com",
      "port": 1080
    }
  ],
  "rotationInterval": 300,
  "testUrl": "https://www.xiaohongshu.com"
}
```

## 代理管理

### 代理轮换

- 自动轮换：每隔一定时间自动切换代理
- 失败切换：当前代理失败时自动切换
- 手动切换：手动选择使用的代理

### 代理测试

- 连接测试：测试代理是否可连接
- 速度测试：测试代理访问速度
- 可用性测试：测试代理是否可用于小红书

### 代理监控

- 实时状态：显示当前代理状态
- 使用统计：记录代理使用情况
- 错误日志：记录代理错误信息

## 最佳实践

### 代理选择

1. 选择稳定的代理服务商
2. 使用专用代理而非公共代理
3. 确保代理支持 HTTPS
4. 选择合适的代理位置

### 性能优化

1. 设置合理的超时时间
2. 配置多个备用代理
3. 启用代理轮换
4. 定期清理无效代理

### 安全建议

1. 使用加密代理连接
2. 定期更换代理密码
3. 避免使用免费代理
4. 监控代理使用情况

## 常见问题

### 代理连接失败

可能原因：
- 代理服务器离线
- 配置信息错误
- 网络连接问题
- 防火墙限制

解决方法：
1. 检查代理服务器状态
2. 验证配置信息
3. 测试网络连接
4. 检查防火墙设置

### 代理速度慢

优化建议：
1. 选择更近的代理服务器
2. 使用专业代理服务
3. 减少并发连接数
4. 启用压缩传输

### 代理安全问题

注意事项：
1. 使用 HTTPS 代理
2. 避免传输敏感信息
3. 定期更换代理
4. 监控异常活动

## 相关链接

- [基础配置](/config/basic)
- [环境变量](/config/env)
- [常见问题](/guide/faq) 